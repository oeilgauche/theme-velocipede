"use strict";var fs=require("fs");module.exports=function(e){e.registerTask("dist","Process files for distribution",function(){var i=e.file.expand({filter:"isFile"},"dist/*");i.forEach(function(e){var i,t=fs.readFileSync(e,"utf8");/\.map$/.test(e)?(t=t.replace(/"dist\//g,'"'),fs.writeFileSync(e,t,"utf-8")):/\.min\.js$/.test(e)&&(t=t.replace(/\n?(\/\/@\s*sourceMappingURL=)(.*)/,function(e,t,r){return i="\n"+t+r.replace(/^dist\//,""),""}),i&&(t=t.replace(/(^\/\*[\w\W]*?)\s*\*\/|$/,function(e,t){return(t||"\n/*")+i+"\n*/"})),fs.writeFileSync(e,t,"utf-8"))})})};